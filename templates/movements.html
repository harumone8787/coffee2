{% extends 'base.html' %}
{% block title %}å…¥å‡ºåº« - åœ¨åº«ç®¡ç†{% endblock %}
{% block content %}
<h1>å…¥å‡ºåº«ï¼ˆæ¶ˆè²»ç™»éŒ²ï¼‰</h1>

<form method="post" class="grid-form">
  <div>
    <label>å•†å“</label>
    <select name="product_id" required>
      {% for p in products %}
        <option value="{{ p.id }}">{{ p.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label>åŒºåˆ†</label>
    <select name="kind" required>
      <option value="IN">å…¥åº«</option>
      <option value="OUT">å‡ºåº«</option>
    </select>
  </div>
  <div>
    <label>æ•°é‡</label>
    <input type="number" name="qty" min="1" value="1" required>
  </div>
  <div>
    <label>ãƒ¡ãƒ¢</label>
    <input name="note" placeholder="ä»»æ„">
  </div>
  <div class="full">
    <button type="submit" class="button-accent">ğŸ“ è¨˜éŒ²ã™ã‚‹</button>
  </div>
</form>

<h2 class="mt-3">æœ€è¿‘ã®å±¥æ­´ï¼ˆ50ä»¶ï¼‰</h2>
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr><th>æ—¥æ™‚</th><th>å•†å“</th><th>åŒºåˆ†</th><th>æ•°é‡</th><th>æ‹…å½“</th><th>ãƒ¡ãƒ¢</th></tr>
    </thead>
    <tbody>
      {% for m in recent %}
      <tr>
        <td>{{ m.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>{{ m.product.name }}</td>
        <td>
          {% if m.kind == 'IN' %}
            <span class="icon icon-in">â¬†ï¸ å…¥åº«</span>
          {% else %}
            <span class="icon icon-out">â¬‡ï¸ å‡ºåº«</span>
          {% endif %}
        </td>
        <td>{{ m.qty }}</td>
        <td>
          {% if m.user.is_admin %}
            <span class="icon icon-admin" title="ç®¡ç†è€…">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 14a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/>
              </svg>
            </span>
          {% else %}
            <span class="icon icon-staff" title="ã‚¹ã‚¿ãƒƒãƒ•">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 14a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/>
              </svg>
            </span>
          {% endif %}
          <span style="margin-left:6px">{{ m.user.username }}</span>
        </td>
        <td>{{ m.note or '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
